{% extends 'badmin.htm' %}
{% block title %}Gestión de Productos{% endblock %}
{% block body %}

<!-- SweetAlert2 mensajes -->
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <script>
        Swal.fire({
          icon: "{{ 'success' if category == 'success' else 'error' }}",
          title: "{{ message }}",
          timer: 2000,
          showConfirmButton: false,
          toast: true,
          position: 'top-end'
        });
      </script>
    {% endfor %}
  {% endif %}
{% endwith %}

<!-- Contenedor principal -->
<div class="container-fluid mt-4" style="background-color: #e8f2ec; padding: 40px; border-radius: 10px;">
  <div class="row">
    
    <!-- Columna Izquierda -->
    <div class="col-md-4">
      <div class="card shadow" style="border: 1px solid #c4dfcc;">
        <div class="card-header text-center" style="background-color: #f7c7c7;">
          <h4 class="fw-bold text-danger">Agregar Coche</h4>
        </div>

        <div class="card-body">
          <form action="{{ url_for('agregar_producto') }}" method="POST">

            <!-- Campo Nombre -->
            <div class="mb-3">
              <label for="nombre" class="form-label fw-bold">Nombre del Coche</label>
              <input 
                type="text" 
                id="nombre"
                name="nombre" 
                class="form-control form-control-lg bg-light fs-6 rounded-3 border-success"
                placeholder="Ejemplo: Toyota Corolla"
                data-bs-toggle="tooltip"
                data-bs-placement="bottom"
                title="Ingrese el nombre o modelo del coche"
                required
                autocomplete="off">
            </div>

            <!-- Campo Precio -->
            <div class="mb-3">
              <label for="precio" class="form-label fw-bold">Precio</label>
              <input 
                type="number" 
                id="precio"
                name="precio" 
                step="0.01" 
                class="form-control form-control-lg bg-light fs-6 rounded-3 border-success"
                placeholder="Ejemplo: 15000.00"
                data-bs-toggle="tooltip"
                data-bs-placement="bottom"
                title="Ingrese el precio del coche en dólares"
                required>
            </div>

            <!-- Campo Descripción -->
            <div class="mb-3">
              <label for="descripcion" class="form-label fw-bold">Descripción</label>
              <textarea 
                id="descripcion"
                name="descripcion" 
                rows="3"
                class="form-control form-control-lg bg-light fs-6 rounded-3 border-success"
                placeholder="Ejemplo: Sedan, color blanco, transmisión automática"
                data-bs-toggle="tooltip"
                data-bs-placement="bottom"
                title="Agregue una descripción breve del coche"
                required></textarea>
            </div>

            <!-- Campo Fecha -->
            <div class="mb-3">
              <label for="fecha" class="form-label fw-bold">Fecha</label>
              <input 
                type="date" 
                id="fecha"
                name="fecha" 
                class="form-control form-control-lg bg-light fs-6 rounded-3 border-success"
                data-bs-toggle="tooltip"
                data-bs-placement="bottom"
                title="Ingrese la fecha"
                required>
            </div>

            <!-- Botón -->
            <div class="text-center">
              <button type="submit" class="btn btn-outline-success px-4 py-2 fw-bold rounded-3">
                Agregar Coche
              </button>
            </div>

          </form>
        </div>
      </div>
    </div>

    <!-- Columna Derecha -->
    <div class="col-md-8">
      <div class="card shadow">
        <div class="card-header text-center" style="background-color: #cce7f7;">
          <h4 class="fw-bold text-primary">Lista de Coches</h4>
        </div>
        <div class="card-body table-responsive">
          {% if productos %}
          <table class="table table-bordered table-hover align-middle">
            <thead class="table-dark text-center">
              <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Precio</th>
                <th>Descripción</th>
                <th>Fecha</th>
              </tr>
            </thead>
            <tbody>
              {% for p in productos %}
              <tr>
                <td class="text-center">{{ p.id }}</td>
                <td>{{ p.nombre }}</td>
                <td>${{ p.precio }}</td>
                <td>{{ p.descripcion }}</td>
                <td>{{ p.fecha }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
          {% else %}
            <p class="text-center">No hay productos registrados.</p>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Script para activar tooltips -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
    tooltipTriggerList.map(function (tooltipTriggerEl) {
      return new bootstrap.Tooltip(tooltipTriggerEl);
    });
  });
</script>

{% endblock %}
