{% extends 'badmin.htm' %}
{% block title %}Gestión de Productos{% endblock %}
{% block body %}

<!-- SweetAlert2 mensajes -->
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <script>
        Swal.fire({
          icon: "{{ 'success' if category == 'success' else 'error' }}",
          title: "{{ message }}",
          timer: 2000,
          showConfirmButton: false,
          toast: true,
          position: 'top-end'
        });
      </script>
    {% endfor %}
  {% endif %}
{% endwith %}

<!-- Contenedor principal -->
<div class="container-fluid mt-4" style="background-color: #e8f2ec; padding: 40px; border-radius: 10px;">

  <div class="row">
    <!-- Columna Izquierda -->
    <div class="col-md-4">
      <div class="card shadow" style="border: 1px solid #c4dfcc;">
        <div class="card-header text-center" style="background-color: #f7c7c7;">
          <h4 class="fw-bold text-danger">Agregar Coche</h4>
        </div>
        <div class="card-body">
          <form action="{{ url_for('agregar_producto') }}" method="POST">
            <div class="mb-3">
              <label class="form-label">Nombre del Coche</label>
              <input type="text" class="form-control border-success" name="nombre" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Precio</label>
              <input type="number" step="0.01" class="form-control border-success" name="precio" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Descripción</label>
              <textarea class="form-control border-success" name="descripcion" rows="3" required></textarea>
            </div>
            <div class="text-center">
              <button type="submit" class="btn btn-outline-success">Agregar Coche</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Columna Derecha -->
    <div class="col-md-8">
      <div class="card shadow">
        <div class="card-header text-center" style="background-color: #cce7f7;">
          <h4 class="fw-bold text-primary">Lista de Coche</h4>
        </div>
        <div class="card-body table-responsive">
          {% if productos %}
          <table class="table table-bordered table-hover align-middle">
            <thead class="table-dark text-center">
              <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Precio</th>
                <th>Descripción</th>
              </tr>
            </thead>
            <tbody>
              {% for p in productos %}
              <tr>
                <td class="text-center">{{ p.id }}</td>
                <td>{{ p.nombre }}</td>
                <td>{{ p.precio }}</td>
                <td>{{ p.descripcion }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
          {% else %}
            <p class="text-center">No hay productos registrados.</p>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}
